<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Latihan JavaScript01 - Kalkulator Sederhana</title>
</head>

<body>
    <div>
        <h1 class="H1">
            Latihan JavaScript01 - Kalkulator Sederhana
        </h1>
        <p>
            Latihan membuat kalkulator sederhana + - * / , menggunakan javascript dengan prompt dan alert.
        </p>
    </div>

    <script>
        function askNumber(message) {
            const input = prompt(message);
            if (input === null) return null; 

            const normalized = input.trim().replace(',', '.');
            const num = Number(normalized);
            if (Number.isFinite(num)) return num;

            return askNumber("Input tidak valid. " + message);
        }

        function askOperator() {
            const op = prompt("Pilih operator: +  -  *  / (ketik salah satu)");
            if (op === null) return null;
            const trimmed = op.trim();
            if (trimmed === "+" || trimmed === "-" || trimmed === "*" || trimmed === "/") return trimmed;
            return askOperator();
        }

        function kalkulator() {
            alert("Selamat datang di Kalkulator Sederhana.\nKlik Batal (Cancel) kapan saja untuk keluar.");
            while (true) {
                const a = askNumber("Masukkan angka pertama:");
                if (a === null) break;

                const operator = askOperator();
                if (operator === null) break;

                const b = askNumber("Masukkan angka kedua:");
                if (b === null) break;

                let result;
                if (operator === "+") result = a + b;
                else if (operator === "-") result = a - b;
                else if (operator === "*") result = a * b;
                else if (operator === "/") {
                    if (b === 0) {
                        alert("Error: Pembagian dengan nol tidak diperbolehkan.");

                        if (!confirm("Ingin mencoba kembali?")) break;
                        else continue;
                    }
                    result = a / b;
                }

                alert(`${a} ${operator} ${b} = ${Number.isFinite(result) ? parseFloat(result.toPrecision(12)) : result}`);

                if (!confirm("Hitung lagi? (OK = ya, Cancel = tidak)")) break;
            }
            alert("Terima kasih â€” kalkulator ditutup.");
        }
        kalkulator();
    </script>
</body>

</html>