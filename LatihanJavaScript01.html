<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <title>Kalkulator Prompt sederhana</title>
</head>

<body>
    <script>
        // Fungsi bantu untuk membaca angka dari prompt; mengembalikan null jika user batal
        function askNumber(message) {
            const input = prompt(message);
            if (input === null) return null; // user cancel
            // Hapus spasi, terima koma atau titik sebagai pemisah desimal
            const normalized = input.trim().replace(',', '.');
            const num = Number(normalized);
            if (Number.isFinite(num)) return num;
            // jika bukan angka, ulangi sampai valid atau user cancel
            return askNumber("Input tidak valid. " + message);
        }

        function askOperator() {
            const op = prompt("Pilih operator: +  -  *  / (ketik salah satu)");
            if (op === null) return null;
            const trimmed = op.trim();
            if (trimmed === "+" || trimmed === "-" || trimmed === "*" || trimmed === "/") return trimmed;
            return askOperator();
        }

        function kalkulator() {
            alert("Selamat datang di Kalkulator Sederhana.\nKlik Batal (Cancel) kapan saja untuk keluar.");
            while (true) {
                const a = askNumber("Masukkan angka pertama:");
                if (a === null) break;

                const operator = askOperator();
                if (operator === null) break;

                const b = askNumber("Masukkan angka kedua:");
                if (b === null) break;

                let result;
                if (operator === "+") result = a + b;
                else if (operator === "-") result = a - b;
                else if (operator === "*") result = a * b;
                else if (operator === "/") {
                    if (b === 0) {
                        alert("Error: Pembagian dengan nol tidak diperbolehkan.");
                        // tanya mau ulang atau batal
                        if (!confirm("Ingin mencoba kembali?")) break;
                        else continue;
                    }
                    result = a / b;
                }

                // Tampilkan hasil (tampilkan angka dengan maksimal 12 digit precision sederhana)
                alert(`${a} ${operator} ${b} = ${Number.isFinite(result) ? parseFloat(result.toPrecision(12)) : result}`);

                // Tanyakan apakah mau menghitung lagi
                if (!confirm("Hitung lagi? (OK = ya, Cancel = tidak)")) break;
            }
            alert("Terima kasih â€” kalkulator ditutup.");
        }

        // Jalankan
        kalkulator();
    </script>
</body>

</html>